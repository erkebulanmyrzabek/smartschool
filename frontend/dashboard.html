<!doctype html>
<html lang="kk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SmartSchool — Dashboard</title>
  <link rel="stylesheet" href="dashboard.css" />
</head>
<body>
  <div class="app">
    <!-- LEFT: navigation / profile -->
    <aside class="sidebar card">
      <div class="brand">
        <div class="logo">SS</div>
        <div>
          <div id="school-name">SmartSchool</div>
          <div id="user-role" class="muted">Жүктелуде...</div>
        </div>
      </div>

      <div class="profile">
        <div id="user-name" class="user-name">—</div>
        <div id="user-email" class="muted">—</div>
      </div>

      <nav class="nav">
        <button class="nav-btn active" data-view="overview">Басты бет</button>
        <button class="nav-btn" data-view="chat">Чат</button>
        <button class="nav-btn" data-view="lessons">Кесте</button>
        <button class="nav-btn" data-view="grades">Үлгерім</button>
        <button class="nav-btn" id="nav-admin" data-view="admin" style="display:none">Әкімшілік</button>
      </nav>

      <div style="margin-top:auto">
        <button id="btn-logout" class="btn-ghost">Шығу</button>
      </div>
    </aside>

    <!-- RIGHT: main content -->
    <main class="main card" id="main">
      <!-- views injected here -->
      <section id="view-overview" class="view">
        <h2>Қысқаша шолу</h2>
        <div class="grid">
          <div class="stat card small" id="stat-lessons"><h3>Сабақтар</h3><div class="stat-value" id="stat-lessons-val">—</div></div>
          <div class="stat card small" id="stat-students"><h3>Оқушылар</h3><div class="stat-value" id="stat-students-val">—</div></div>
          <div class="stat card small" id="stat-teachers"><h3>Мұғалімдер</h3><div class="stat-value" id="stat-teachers-val">—</div></div>
        </div>

        <div style="margin-top:14px">
          <strong>Жедел чат (соңғы хабарлар)</strong>
          <div class="chat-preview" id="overview-chat">
            <div class="chat-messages" id="overview-messages"></div>
          </div>
        </div>
      </section>

      <section id="view-chat" class="view hidden">
        <h2>Чат</h2>
        <div class="chat-panel">
          <div class="chat-list card">
            <h4>Жіберу</h4>
            <label>Жеке ме?</label>
            <select id="chat-scope">
              <option value="global">Жалпы</option>
              <option value="private">Жеке (ID бойынша)</option>
            </select>
            <div id="private-to-wrap" style="display:none;margin-top:8px">
              <label>Алушының user id (мысалы: 12)</label>
              <input id="chat-private-to" placeholder="Алушының id" />
              <small class="muted">(Әкімшілікке/мұғалімге жеке хабар жіберу үшін)</small>
            </div>

            <textarea id="chat-text" rows="4" placeholder="Хабарлама..."></textarea>
            <div style="display:flex;gap:8px;margin-top:8px">
              <button id="chat-send" class="btn">Жіберу</button>
              <button id="refresh-chat" class="btn-ghost">Жаңарту</button>
            </div>
          </div>

          <div class="chat-window card">
            <h4>Хабарламалар</h4>
            <div class="chat-messages" id="chat-messages"></div>
          </div>
        </div>
      </section>

      <section id="view-lessons" class="view hidden">
        <h2>Сабақтар / Кесте</h2>
        <div class="grid-two">
          <div class="card" style="padding:12px">
            <h4>Келесі сабақтар</h4>
            <table class="table" id="lessons-table">
              <thead><tr><th>Күні</th><th>Уақыт</th><th>Пән</th><th>Мұғалім</th></tr></thead>
              <tbody></tbody>
            </table>
          </div>

          <div class="card" style="padding:12px">
            <h4>Сабақ қосу</h4>
            <div class="field"><label>Пән</label><input id="lesson-subject" /></div>
            <div class="field"><label>Күні</label><input id="lesson-date" type="date" /></div>
            <div class="field"><label>Уақыты</label><input id="lesson-time" type="time" /></div>
            <div class="field"><label>Тақырып</label><input id="lesson-topic" /></div>
            <div style="display:flex;gap:8px"><button id="lesson-add" class="btn">Қосу</button><button id="lesson-refresh" class="btn-ghost">Жаңарту</button></div>
            <small class="muted" id="lesson-help">Тек мұғалімдер мен әкімшілік сабақ қоса алады.</small>
          </div>
        </div>
      </section>

      <section id="view-grades" class="view hidden">
        <h2>Үлгерім</h2>
        <div class="grid-two">
          <div class="card" style="padding:12px">
            <h4>Үлгерім кестесі</h4>
            <table class="table" id="grades-table">
              <thead><tr><th>Оқушы</th><th>Пән</th><th>Балл</th></tr></thead>
              <tbody></tbody>
            </table>
          </div>

          <div class="card" style="padding:12px">
            <h4>Баға қосу</h4>
            <div class="field"><label>Оқушы ID</label><input id="grade-student-id" /></div>
            <div class="field"><label>Пән</label><input id="grade-subject" /></div>
            <div class="field"><label>Балл</label><input id="grade-score" type="number" /></div>
            <div style="display:flex;gap:8px"><button id="grade-add" class="btn">Қосу</button><button id="grades-refresh" class="btn-ghost">Жаңарту</button></div>
            <small class="muted">Тек мұғалімдер мен әкімшілік бағаларды қоса алады.</small>
          </div>
        </div>
      </section>

      <section id="view-admin" class="view hidden">
        <h2>Әкімшілік</h2>
        <div class="card" style="padding:12px">
          <h4>Қолданушылар (Admin-only)</h4>
          <div id="admin-users-wrap">
            <table class="table" id="admin-users-table">
              <thead><tr><th>ID</th><th>Аты</th><th>Email</th><th>Рөл</th></tr></thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
      </section>

    </main>
  </div>

  <script src="https://cdn.socket.io/4.7.0/socket.io.min.js"></script>
  <script src="dashboard.js"></script>
</body>
</html>
